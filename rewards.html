<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>TxPlays — Rewards</title>

    <!-- Poppins -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">

    <!-- Tailwind -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            fontFamily: { sans: ["Poppins", "ui-sans-serif", "system-ui"] },
            colors: {
              pink: { brand: "#ec4899" },
              blue: { brand: "#3b82f6" },
              violet: { brand: "#7c3aed" },
              indigo: { brand: "#4f46e5" },
              purple: { brand: "#a855f7" },
              discord: "#5865F2",
              discordDark: "#4752C4"
            },
            dropShadow: {
              neon: "0 0 10px rgba(59,130,246,0.75)",
              neonPink: "0 0 10px rgba(236,72,153,0.75)",
            },
            boxShadow: {
              card: "0 20px 60px rgba(0,0,0,.6), inset 0 1px 0 rgba(255,255,255,.06)",
              ring: "0 0 0 1px rgba(255,255,255,.08)",
            }
          }
        }
      };
    </script>

    <!-- Lucide -->
    <script defer src="https://unpkg.com/lucide@latest/dist/umd/lucide.min.js"></script>

    <style>
      :root{
        color-scheme:dark;
        --bg-2:#0b0d14;
        --glass:rgba(18,22,34,.55);
        --glass-brd:rgba(255,255,255,.08);
        --rail-pad:14rem;
      }
      html,body{height:100%;background:var(--bg-2)}

      /* Background stack */
      .bg-stack{position:fixed;inset:0;pointer-events:none;z-index:-1}
      .bg-aurora,.bg-grid,.bg-noise{position:absolute;inset:0}
      .bg-aurora{filter:blur(40px) saturate(120%);mix-blend-mode:screen;opacity:.9}
      .bg-aurora::before,.bg-aurora::after{
        content:"";position:absolute;inset:-20% -20%;
        background:conic-gradient(from 90deg at 30% 30%, rgba(59,130,246,.35), transparent 40%, rgba(124,58,237,.35) 60%, rgba(236,72,153,.35) 80%, transparent);
        animation:swirl 18s linear infinite;
      }
      .bg-aurora::after{animation-duration:28s;animation-direction:reverse;filter:hue-rotate(20deg);opacity:.8}
      @keyframes swirl{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}
      .bg-grid{
        background-image:
          radial-gradient(circle at 50% -20%, rgba(79,70,229,.25), transparent 55%),
          radial-gradient(1200px 600px at 0% 100%, rgba(236,72,153,.12), transparent 60%),
          linear-gradient(to right, rgba(255,255,255,.06) 1px, transparent 1px),
          linear-gradient(to bottom, rgba(255,255,255,.06) 1px, transparent 1px);
        background-size:auto,auto,28px 28px,28px 28px;
        background-position:center,center,center,center;
        mask-image:radial-gradient(1200px 800px at 50% 60%, black 60%, transparent 100%);
      }
      .bg-noise{opacity:.05}
      .bg-noise::before{
        content:"";position:absolute;inset:0;
        background:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="200"><filter id="n"><feTurbulence type="fractalNoise" baseFrequency="0.8" numOctaves="4" stitchTiles="stitch"/><feColorMatrix values="0 0 0 0 1  0 0 0 0 1  0 0 0 0 1  0 0 0 .35 0"/></filter><rect width="100%" height="100%" filter="url(%23n)"/></svg>') 0 0/200px 200px;
        mix-blend-mode:overlay;animation:noiseShift 1.5s steps(4) infinite;
      }
      @keyframes noiseShift{50%{transform:translateY(-10px)}}
      .glass{backdrop-filter:blur(14px) saturate(120%);-webkit-backdrop-filter:blur(14px) saturate(120%);background:var(--glass);border:1px solid var(--glass-brd)}
      .glass:hover{border-color:rgba(255,255,255,.12)}
      .spotlight{position:fixed;inset:0;pointer-events:none;z-index:0}

      /* Rail */
      .nav-rail{--rail-w:14rem}
      .nav-rail .rail{width:var(--rail-w);transition:width .25s ease}
      .nav-rail.collapsed{--rail-w:4rem}
      header.pl-rail,main.pl-rail,footer.pl-rail{padding-left:var(--rail-pad);transition:padding .25s ease}

      .nav-item{width:100%;display:flex;align-items:center;gap:12px;padding:10px 14px;border-radius:14px;margin:0 8px;color:#fff;transition:background .2s ease, transform .08s ease, color .2s ease, box-shadow .2s ease}
      .nav-bubble{position:relative;display:grid;place-items:center;width:36px;height:36px;border-radius:12px;background:radial-gradient(120% 120% at 20% 20%, color-mix(in srgb, var(--accent), white 15%), color-mix(in srgb, var(--accent), black 35%));box-shadow:0 8px 24px color-mix(in srgb, var(--accent), transparent 75%)}
      .nav-item:hover .nav-bubble{box-shadow:0 10px 30px color-mix(in srgb, var(--accent), transparent 60%)}
      .nav-item:hover{background:rgba(255,255,255,.06)}
      .nav-item:active{transform:translateY(1px)}
      .nav-item.is-active{background:linear-gradient(90deg, color-mix(in srgb, var(--accent), transparent 85%), rgba(124,58,237,.10));box-shadow:inset 0 0 0 1px rgba(255,255,255,.06)}
      .nav-item i{width:1.5rem;height:1.5rem;color:var(--accent,#60a5fa);filter:drop-shadow(0 0 10px color-mix(in srgb, var(--accent), transparent 65%));transition:transform .2s ease, filter .2s ease, color .2s ease}
      .nav-item:hover i{transform:scale(1.05) rotate(3deg)}
      .nav-item .nav-label{opacity:1;transform:translateX(0);white-space:nowrap;transition:transform .2s ease, opacity .2s ease, max-width .2s ease;font-size:12px}
      .nav-rail.collapsed .nav-item .nav-label{max-width:0;opacity:0;transform:translateX(-6px);overflow:hidden}
      .rail-active{position:absolute;left:0;width:4px;height:36px;border-top-right-radius:9999px;border-bottom-right-radius:9999px;background:linear-gradient(180deg, var(--accent,#3b82f6), #ec4899);box-shadow:0 0 18px color-mix(in srgb, var(--accent), transparent 45%);top:72px;opacity:1;transition:top .25s ease, height .2s ease, opacity .2s ease}
      .nav-rail.collapsed .rail-active{opacity:.7;width:3px}
      .rail-toggle{position:absolute;bottom:14px;left:50%;transform:translateX(-50%);width:36px;height:36px;border-radius:12px;display:grid;place-items:center;cursor:pointer;background:linear-gradient(135deg, #3b82f6,#7c3aed,#ec4899);background-size:200% 200%;animation:cue-gradient 6s ease infinite;box-shadow:0 0 16px rgba(124,58,237,.35);border:1px solid rgba(255,255,255,.08)}
      .rail-toggle:hover{box-shadow:0 0 22px rgba(236,72,153,.55)}
      @keyframes cue-gradient{0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%}}

      /* CTA */
      .btn-primary{
        position:relative;display:inline-flex;align-items:center;gap:.5rem;
        padding:.75rem 1.25rem;border-radius:1rem;font-weight:700;font-size:.95rem;color:#fff;
        background-image:linear-gradient(135deg,#4f46e5,#7c3aed,#ec4899);
        background-size:200% 200%;border:1px solid rgba(255,255,255,.12);
        box-shadow:0 10px 30px rgba(124,58,237,.35), inset 0 1px 0 rgba(255,255,255,.08);
        transition:transform .08s ease, box-shadow .2s ease, background-position .4s ease, filter .2s ease;
      }
      .btn-primary:hover{background-position:100% 50%;box-shadow:0 14px 40px rgba(236,72,153,.45), inset 0 1px 0 rgba(255,255,255,.12);filter:drop-shadow(0 0 10px rgba(124,58,237,.6))}
      .btn-primary:active{transform:translateY(1px)}

      /* Rewards cards */
      .rgrid{display:grid;gap:1rem}
      @media (min-width:640px){ .rgrid{grid-template-columns:repeat(2,minmax(0,1fr))} }
      @media (min-width:1024px){ .rgrid{grid-template-columns:repeat(3,minmax(0,1fr))} }

      .rcard{
        position:relative;border-radius:18px;overflow:hidden;
        box-shadow:0 20px 60px rgba(0,0,0,.45);
      }
      .rcard::before{
        content:"";position:absolute;inset:-1px;border-radius:20px;padding:1px;z-index:0;
        background: conic-gradient(from var(--ang,0deg), rgba(79,70,229,.55), rgba(124,58,237,.55), rgba(236,72,153,.55), rgba(79,70,229,.55));
        filter: blur(6px); opacity:.35;
        -webkit-mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
        -webkit-mask-composite: xor; mask-composite: exclude;
      }
      .rcard-content{position:relative;z-index:1}

      .rank-badge{
        display:inline-flex;align-items:center;gap:.45rem;
        font-size:.75rem;letter-spacing:.04em;text-transform:uppercase;
        padding:.35rem .6rem;border-radius:.6rem;background:rgba(255,255,255,.06);
        border:1px solid rgba(255,255,255,.10)
      }
      .amount{
        font-weight:800;font-size:1.35rem;background:linear-gradient(90deg,#ec4899,#3b82f6);
        -webkit-background-clip:text;background-clip:text;color:transparent
      }

      /* Progress bar (fancy) */
      .pbar{position:relative;width:100%;height:14px;border-radius:9999px;overflow:hidden;background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.08)}
      .pbar-fill{
        height:100%;width:0%;
        background:linear-gradient(90deg,#4f46e5,#7c3aed,#ec4899);
        background-size:200% 100%;
        animation:pflow 4s linear infinite;
        transition:width .5s ease;
      }
      @keyframes pflow{0%{background-position:0% 50%}100%{background-position:200% 50%}}
      .pbar-tip{
        position:absolute;top:50%;transform:translateY(-50%);
        right:.5rem;font-size:.7rem;font-weight:700;color:white
      }

      .status-chip{
        display:inline-flex;align-items:center;gap:.4rem;font-size:.75rem;
        padding:.3rem .55rem;border-radius:.5rem;border:1px solid rgba(255,255,255,.1);
        background:rgba(255,255,255,.06)
      }
      .status-claimed{background:linear-gradient(135deg, rgba(34,197,94,.2), rgba(59,130,246,.15));border-color:rgba(34,197,94,.35)}
      .status-progress{background:linear-gradient(135deg, rgba(124,58,237,.18), rgba(236,72,153,.18));border-color:rgba(124,58,237,.35)}

      .muted{color:rgba(255,255,255,.7)}
      .small{font-size:.85rem}

      /* Skeletons */
      .skeleton{position:relative;overflow:hidden;background:rgba(255,255,255,.06);border-radius:12px}
      .skeleton::after{
        content:"";position:absolute;inset:0;
        background:linear-gradient(90deg, transparent, rgba(255,255,255,.07), transparent);
        animation:shimmer 1.8s infinite;
      }
      @keyframes shimmer{0%{transform:translateX(-100%)}100%{transform:translateX(100%)}}

      /* Scrollbar */
      ::-webkit-scrollbar{width:10px;height:10px}
      ::-webkit-scrollbar-thumb{background:linear-gradient(180deg,#3b82f6,#7c3aed);border-radius:9999px}
      ::-webkit-scrollbar-track{background:rgba(255,255,255,.06)}
      /* HERO (shared) */
.hero-section { position: relative; overflow: visible; }
.hero-sun{
  --sun-size: min(1100px, 92vw);
  position: absolute;
  left: 50%;
  top: calc(var(--sun-size) * -0.5);  /* arcs up above the content */
  width: 96%;
  height: 110%;
  transform: translateX(-50%);
  border-radius: 9999px;
  background-image: var(--hero-img, url('hero.jpg'));
  background-size: cover;
  background-position: center;
  z-index: 0;                /* keep behind content */
  opacity: .9;
  filter: saturate(110%);
  -webkit-mask-image: radial-gradient(closest-side, #000 78%, transparent 100%);
          mask-image: radial-gradient(closest-side, #000 78%, transparent 100%);
  pointer-events: none;
}
.hero-sun::after{
  content:"";
  position:absolute; inset:-2%;
  border-radius:inherit;
  box-shadow: inset 0 -120px 160px rgba(11,13,20,.65);
  pointer-events:none;
}
.hero-fade{
  position:absolute; left:0; right:0; bottom:-1px; height:220px;
  pointer-events:none; z-index: 0;
  background: linear-gradient(to bottom,
    rgba(11,13,20,0) 0%,
    rgba(11,13,20,.45) 1%,
    rgba(11,13,20,.75) 98%,
    var(--bg-2) 990%);
}

    </style>
  </head>

  <body class="bg-[radial-gradient(2000px_800px_at_50%_120%,#070910,transparent)] text-white font-sans antialiased">

    <canvas id="spotlight" class="spotlight"></canvas>

    <!-- Sidebar -->
    <aside class="nav-rail fixed left-0 top-0 h-full z-20">
      <div class="rail glass h-full flex flex-col items-center pt-6 gap-2 overflow-hidden relative">
        <span class="rail-active pointer-events-none"></span>

        <a href="/" class="nav-item" aria-label="Home" style="--accent:#60A5FA">
          <span class="nav-bubble"><i data-lucide="home"></i></span>
          <span class="nav-label">Home</span>
        </a>
        <a href="/leaderboard" class="nav-item" aria-label="Leaderboards" style="--accent:#F59E0B">
          <span class="nav-bubble"><i data-lucide="trophy"></i></span>
          <span class="nav-label">Leaderboards</span>
        </a>
        <a href="/bonuses" class="nav-item" aria-label="Bonuses" style="--accent:#EC4899">
          <span class="nav-bubble"><i data-lucide="gift"></i></span>
          <span class="nav-label">Bonuses</span>
        </a>
        <a href="/rewards" class="nav-item is-active" aria-label="Rewards" style="--accent:#FBBF24">
          <span class="nav-bubble"><i data-lucide="coins"></i></span>
          <span class="nav-label">Rewards</span>
        </a>
        <a href="/events" class="nav-item" aria-label="Events" style="--accent:#8B5CF6">
          <span class="nav-bubble"><i data-lucide="calendar"></i></span>
          <span class="nav-label">Events</span>
        </a>
        <a href="/content" class="nav-item" aria-label="Content" style="--accent:#22D3EE">
          <span class="nav-bubble"><i data-lucide="video"></i></span>
          <span class="nav-label">Content</span>
        </a>

        <button id="railToggle" class="rail-toggle" title="Collapse/Expand">
          <i data-lucide="chevrons-left" class="w-4 h-4 text-white"></i>
        </button>
      </div>
    </aside>

    <!-- Header -->
    <header class="pl-rail relative z-30">
      <div class="max-w-7xl mx-auto flex items-center justify-between p-4">
        <div class="flex items-center gap-3">
          <div class="w-28 h-28 rounded-2xl grid place-items-center overflow-hidden">
            <img src="word.png" alt="TxPlays Logo" class="w-30 h-30 object-contain">
          </div>
        </div>
        <a href="#discord-login" class="magnetic group relative inline-flex items-center gap-2 rounded-xl px-6 py-3 text-lg font-semibold bg-discord hover:bg-discordDark transition-colors">
          <span>Login</span>
          <span class="absolute -inset-px rounded-xl ring-1 ring-white/10"></span>
        </a>
      </div>
    </header>

<main class="pl-rail relative z-10 pb-20">
  <!-- Hero layer lives inside MAIN but behind the content -->
  <section class="max-w-7xl mx-auto px-6 pt-12 hero-section">
    <!-- HERO: behind heading + cards -->
    <div class="absolute inset-0 -z-10 pointer-events-none">
      <!-- swap background.png for your sun image -->
      <div class="hero-sun" style="--hero-img: url('background.png'); --sun-size: min(1200px,95vw)"></div>
      <div class="hero-fade"></div>
    </div>

    <!-- Page header (sits ABOVE the sun) -->
    <div class="relative z-10 text-center">
      <h1 class="text-4xl sm:text-5xl font-extrabold tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-blue-brand via-violet to-pink-brand">
        Rewards
      </h1>
      <p class="mt-3 text-white/70">Claim up to $4,444 in rank-up rewards directly from Tx.</p>
    </div>

    <!-- States -->
    <div id="loading" class="relative z-10 mt-10 grid gap-6 sm:grid-cols-2 lg:grid-cols-3">
      <div class="glass rcard skeleton h-48"></div>
      <div class="glass rcard skeleton h-48"></div>
      <div class="glass rcard skeleton h-48"></div>
    </div>

    <div id="error-message" class="relative z-10 hidden mt-6">
      <div class="glass rounded-xl p-4 border border-red-500/20">
        <div class="flex items-center gap-2 text-red-300 font-semibold">
          <i data-lucide="alert-triangle" class="w-4 h-4"></i>
          <span>Unable to load user data. Showing rewards with default progress.</span>
        </div>
      </div>
    </div>

    <!-- Rewards Grid -->
    <div id="rewards-grid" class="relative z-10 mt-8 rgrid"></div>

    <!-- Help CTA -->
    <div class="relative z-10 mt-10 text-center">
      <a href="#how-to-rank" class="magnetic btn-primary" aria-label="How to rank up">
        <i data-lucide="sparkles"></i><span>How do rank-ups work?</span>
      </a>
    </div>
  </section>
</main>


    <!-- Footer -->
    <footer class="pl-rail border-t border-white/10 relative z-10">
      <div class="max-w-7xl mx-auto px-6 py-10 grid gap-8 sm:grid-cols-3">
        <div>
          <div class="flex items-center gap-3">
            <div class="w-8 h-8 rounded-xl bg-gradient-to-br from-pink-brand to-blue-brand grid place-items-center"><i data-lucide="zap" class="w-4 h-4"></i></div>
            <span class="font-semibold">TxPlays</span>
          </div>
          <p class="mt-3 text-sm text-white/60">Promos, Leaderboards, Rewards and Events — all in one place.</p>
        </div>
        <div class="grid grid-cols-2 gap-6 text-sm">
          <div class="space-y-2">
            <div class="text-white/60 uppercase tracking-wide text-xs">Pages</div>
            <a class="block hover:text-white/90" href="/leaderboard">Leaderboards</a>
            <a class="block hover:text-white/90" href="/bonuses">Bonuses</a>
            <a class="block hover:text-white/90" href="/rewards">Rewards</a>
            <a class="block hover:text-white/90" href="/events">Events</a>
            <a class="block hover:text-white/90" href="/content">Content</a>
          </div>
          <div class="space-y-2">
            <div class="text-white/60 uppercase tracking-wide text-xs">Company</div>
            <a class="block hover:text-white/90" href="#">About</a>
            <a class="block hover:text-white/90" href="#">Contact</a>
            <a class="block hover:text-white/90" href="#">Terms</a>
            <a class="block hover:text-white/90" href="#">Privacy</a>
          </div>
        </div>
        <div class="text-sm">
          <a href="#discord-login" class="inline-flex items-center gap-2 rounded-xl px-3 py-2 mt-2 bg-discord hover:bg-discordDark transition-colors">Login</a>
          <p class="mt-4 text-xs text-white/50">© <span id="year"></span> TxPlays. All rights reserved.</p>
        </div>
      </div>
    </footer>

    <script>
      // --- Config from your snippet (adjust image paths if needed) ---
      const REWARDS = [
        { level: 1, requirement: 5000,   image: 'bronz.png',           name: 'Bronze Rank',   amount: '$15'   },
        { level: 2, requirement: 50000,  image: 'bronz.png',             name: 'Silver Rank',   amount: '$50'   },
        { level: 3, requirement: 300000, image: 'bronz.png',           name: 'Gold Rank',     amount: '$150'  },
        { level: 4, requirement: 1050000,image: 'bronz.png',           name: 'Platinum Rank', amount: '$830'  },
        { level: 5, requirement: 1800000,image: 'bronz.png',          name: 'Jade Rank',     amount: '$900'  },
        { level: 6, requirement: 4300000,image: 'bronz.png',      name: 'Sapphire Rank', amount: '$2500' }
      ];

      let userWagerAmount = 0;
      let isLoggedIn = false;
      let username = 'Guest';

      // Init icons & layout
      window.addEventListener('DOMContentLoaded', () => {
        if (window.lucide?.createIcons) window.lucide.createIcons();
        document.getElementById('year').textContent = new Date().getFullYear();

        const railWrap = document.querySelector('.nav-rail');
        const rail = document.querySelector('.nav-rail .rail');
        const indicator = rail.querySelector('.rail-active');
        const toggleBtn = document.getElementById('railToggle');
        const LS_KEY = 'railCollapsed';
        const collapsed = localStorage.getItem(LS_KEY) === '1';
        setCollapsed(collapsed);
        toggleBtn.addEventListener('click', () => setCollapsed(!railWrap.classList.contains('collapsed')));

        function setCollapsed(isCollapsed){
          railWrap.classList.toggle('collapsed', isCollapsed);
          document.documentElement.style.setProperty('--rail-pad', isCollapsed ? '4rem' : '14rem');
          toggleBtn.innerHTML = isCollapsed ? '<i data-lucide="chevrons-right" class="w-4 h-4 text-white"></i>' : '<i data-lucide="chevrons-left" class="w-4 h-4 text-white"></i>';
          if (window.lucide?.createIcons) window.lucide.createIcons({ nameAttr: 'data-lucide' });
          localStorage.setItem(LS_KEY, isCollapsed ? '1' : '0');
        }

        const active = rail.querySelector('.nav-item.is-active') || rail.querySelector('.nav-item');
        if (active) moveIndicator(active);
        function moveIndicator(link){
          const railRect = rail.getBoundingClientRect();
          const linkRect = link.getBoundingClientRect();
          const top = linkRect.top - railRect.top + (linkRect.height - indicator.offsetHeight) / 2;
          indicator.style.top = Math.max(8, top) + 'px';
          indicator.style.height = Math.max(28, Math.min(44, linkRect.height - 8)) + 'px';
          const accent = getComputedStyle(link).getPropertyValue('--accent').trim();
          indicator.style.background = `linear-gradient(180deg, ${accent || '#3b82f6'}, #ec4899)`;
          indicator.style.boxShadow = `0 0 18px ${accent || 'rgba(59,130,246,.6)'}`;
        }

        // Spotlight canvas
        const cvs = document.getElementById('spotlight'); const ctx = cvs.getContext('2d'); const DPR = Math.max(1, window.devicePixelRatio || 1);
        function resize(){ cvs.width = innerWidth*DPR; cvs.height = innerHeight*DPR; cvs.style.width = innerWidth+'px'; cvs.style.height = innerHeight+'px'; }
        resize(); addEventListener('resize', resize);
        let mx = innerWidth/2, my = innerHeight/2;
        addEventListener('pointermove', e => (mx=e.clientX, my=e.clientY));
        (function frame(){
          ctx.clearRect(0,0,cvs.width,cvs.height);
          const r = Math.min(innerWidth, innerHeight)*.25;
          const g = ctx.createRadialGradient(mx*DPR, my*DPR, 0, mx*DPR, my*DPR, r*DPR);
          g.addColorStop(0,'rgba(59,130,246,0.08)'); g.addColorStop(1,'rgba(0,0,0,0)');
          ctx.fillStyle = g; ctx.fillRect(0,0,cvs.width,cvs.height);
          requestAnimationFrame(frame);
        })();

        // Animate conic border angle
        let ang = 0; setInterval(()=> {
          ang = (ang + 2) % 360;
          document.querySelectorAll('.rcard').forEach(c => c.style.setProperty('--ang', ang+'deg'));
        }, 60);
      });

      // Magnetic buttons
      document.querySelectorAll('.magnetic').forEach(btn => {
        let r; btn.addEventListener('pointermove', e => {
          r = btn.getBoundingClientRect();
          const x = (e.clientX - r.left - r.width/2) / (r.width/2);
          const y = (e.clientY - r.top - r.height/2) / (r.height/2);
          btn.style.transform = `translate(${x*6}px, ${y*6}px)`;
        });
        btn.addEventListener('pointerleave', ()=> btn.style.transform = 'translate(0,0)');
      });

      // ---- Rewards logic (compatible with your API) ----
      async function loadRewardsData(){
        try {
          const res = await fetch('get_rewards_data.php');
          const data = await res.json();
          userWagerAmount = parseFloat(data.wager_amount) || 0;
          isLoggedIn = !!data.is_logged_in;
          username = data.username || 'Guest';
          renderRewards();
          document.getElementById('loading').classList.add('hidden');
          if (data.error && !isLoggedIn) document.getElementById('error-message').classList.remove('hidden');
        } catch (e) {
          console.error('Error loading rewards data:', e);
          userWagerAmount = 0; isLoggedIn = false; username = 'Guest';
          renderRewards();
          document.getElementById('loading').classList.add('hidden');
          document.getElementById('error-message').classList.remove('hidden');
        }
      }

      function getRewardStatus(requirement){
        return userWagerAmount >= requirement ? 'claimed' : 'progress';
      }

      function fmt(num){ return new Intl.NumberFormat('en-US',{maximumFractionDigits:0}).format(num); }

      function renderRewards(){
        const grid = document.getElementById('rewards-grid');
        grid.innerHTML = '';
        REWARDS.forEach(reward => {
          const status = getRewardStatus(reward.requirement);
          const progress = Math.min(100, (userWagerAmount / reward.requirement) * 100);
          const remaining = Math.max(0, reward.requirement - userWagerAmount);

          const card = document.createElement('article');
          card.className = 'glass rcard';
          card.innerHTML = `
            <div class="rcard-content p-5">
              <div class="flex items-start justify-between gap-4">
                <span class="rank-badge">
                  <i data-lucide="shield" class="w-4 h-4"></i>
                  <strong>Rank ${reward.level}</strong>
                </span>
                <span class="status-chip ${status === 'claimed' ? 'status-claimed' : 'status-progress'}">
                  <i data-lucide="${status==='claimed' ? 'check-circle-2' : 'chevrons-up'}" class="w-4 h-4"></i>
                  ${status === 'claimed' ? 'Achieved' : 'In Progress'}
                </span>
              </div>

              <div class="mt-4 flex items-center gap-4">
                <div class="w-20 h-20 rounded-xl overflow-hidden bg-black/30 border border-white/10 flex items-center justify-center">
                  <img src="${reward.image}" alt="${reward.name}" class="w-full h-full object-contain">
                </div>
                <div class="min-w-0">
                  <h3 class="text-xl font-extrabold leading-tight">${reward.name}</h3>
                  <div class="mt-1 muted small flex items-center gap-2">
                    <i data-lucide="target" class="w-4 h-4"></i>
                    Requirement: <strong class="text-white/90">${fmt(reward.requirement)}</strong>
                  </div>
                </div>
              </div>

              <div class="mt-5">
                <div class="pbar" aria-label="Progress to ${reward.name}" aria-valuemin="0" aria-valuemax="100" aria-valuenow="${progress.toFixed(1)}">
                  <div class="pbar-fill" style="width:${progress}%;"></div>
                  <div class="pbar-tip">${progress.toFixed(1)}%</div>
                </div>
                <div class="mt-2 muted small flex items-center gap-2">
                  <i data-lucide="wallet" class="w-4 h-4"></i>
                  ${status === 'claimed' ? 'Requirement met.' : `${fmt(remaining)} remaining`}
                </div>
              </div>

              <div class="mt-5 flex items-center justify-between">
                <div class="amount">${reward.amount}</div>
                ${status === 'claimed'
                  ? `<button class="btn-primary" disabled aria-disabled="true" title="Already achieved"><i data-lucide="badge-check"></i><span>Achieved</span></button>`
                  : `<button class="btn-primary" onclick="openMoreInfo(${reward.level})"><i data-lucide="info"></i><span>More Info</span></button>`
                }
              </div>
            </div>
          `;
          grid.appendChild(card);
        });
        if (window.lucide?.createIcons) window.lucide.createIcons({ nameAttr: 'data-lucide' });
      }

      function openMoreInfo(level){
        // Placeholder action — link to your docs/Discord, or open a modal
        window.open('https://discord.gg/txplays', '_blank');
      }

      document.addEventListener('DOMContentLoaded', loadRewardsData);
    </script>
  </body>
</html>
